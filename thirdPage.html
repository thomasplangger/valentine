<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Yayyy</title>
  <style>
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#fff;
      color:#111827;
      padding:24px;
    }
    .wrap{
      text-align:center;
      width:min(420px, 100%);
    }
    h1{
      margin:0 0 18px;
      font-size:38px;
      line-height:1.1;
    }
    .puzzle{
      width:100%;
      max-width:300px;
      aspect-ratio: 1 / 1;
      margin:0 auto 16px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:4px;
      border-radius:14px;
      background:#f3f4f6;
      padding:4px;
      box-shadow:0 10px 30px rgba(0,0,0,.12);
      transition: gap .15s ease, padding .15s ease;
    }
    .puzzle.solved{
      display:block;
      gap:0;
      padding:0;
      background: transparent;
    }
    .tile{
      border-radius:10px;
      background-image: url("img/us.png");
      background-size: 300% 300%;
      background-repeat: no-repeat;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .12s ease;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06);
    }
    .tile:active{ transform: scale(.98); }
    .tile.empty{
      background: transparent;
      box-shadow: none;
      cursor: default;
    }
    .final-image{
      width:100%;
      height:auto;
      display:block;
      border-radius:14px;
      box-shadow:0 10px 30px rgba(0,0,0,.12);
    }
    .message{
      display:none;
      margin-top:10px;
    }
    .message.show{
      display:block;
    }
    .message .line1{
      font-size:24px;
      font-weight:800;
      margin:0 0 6px;
    }
    .message .line2{
      font-size:22px;
      font-weight:800;
      margin:0;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Yayyy, cant wait!</h1>
    <div class="puzzle" id="puzzle" aria-label="Sliding puzzle"></div>
    <div class="message" id="message">
      <p class="line1">you complete me</p>
      <p class="line2">i love you ❤️</p>
    </div>
  </div>
  <script>
    const puzzleEl = document.getElementById("puzzle");
    const messageEl = document.getElementById("message");

    const size = 3;
    const empty = 8;
    const tiles = [];
    for (let i = 0; i < size * size; i++) tiles.push(i);

    function indexToCoord(idx){
      return { x: idx % size, y: Math.floor(idx / size) };
    }

    function isAdjacent(a, b){
      const ac = indexToCoord(a);
      const bc = indexToCoord(b);
      const dx = Math.abs(ac.x - bc.x);
      const dy = Math.abs(ac.y - bc.y);
      return (dx + dy) === 1;
    }

    function isSolved(){
      for (let i = 0; i < tiles.length; i++) {
        if (tiles[i] !== i) return false;
      }
      return true;
    }

    function render(){
      const solved = isSolved();
      puzzleEl.classList.toggle("solved", solved);
      messageEl.classList.toggle("show", solved);

      if (solved) {
        puzzleEl.innerHTML = "<img class=\"final-image\" src=\"img/us.png\" alt=\"us\" />";
        return;
      }

      puzzleEl.innerHTML = "";
      tiles.forEach((value, idx) => {
        const tile = document.createElement("div");
        tile.className = "tile";
        if (value === empty) {
          tile.classList.add("empty");
        } else {
          const { x, y } = indexToCoord(value);
          tile.style.backgroundPosition = `${(x / (size - 1)) * 100}% ${(y / (size - 1)) * 100}%`;
          tile.setAttribute("aria-label", `tile ${value + 1}`);
          tile.addEventListener("click", () => tryMove(idx));
        }
        puzzleEl.appendChild(tile);
      });
    }

    function tryMove(tileIdx){
      const emptyIdx = tiles.indexOf(empty);
      if (!isAdjacent(tileIdx, emptyIdx)) return;
      [tiles[tileIdx], tiles[emptyIdx]] = [tiles[emptyIdx], tiles[tileIdx]];
      render();
    }

    function shuffle(moves){
      for (let i = 0; i < moves; i++) {
        const emptyIdx = tiles.indexOf(empty);
        const options = [];
        for (let j = 0; j < tiles.length; j++) {
          if (isAdjacent(j, emptyIdx)) options.push(j);
        }
        const pick = options[Math.floor(Math.random() * options.length)];
        [tiles[pick], tiles[emptyIdx]] = [tiles[emptyIdx], tiles[pick]];
      }
    }

    const moves = Math.random() < 0.5 ? 3 : 4;
    shuffle(5);
    render();
  </script>
</body>
</html>
